---
import Layout from '../layouts/Layout.astro';
import MermaidDiagram from '../components/MermaidDiagram.astro';
import { fetchAll } from '../lib/sanity';

const solutions = await fetchAll('solution');
---

<Layout title="Solution Components | pensionable.ai" description="Explore pensionable.ai's solution components: Logic ETL, Data ETL, Analytics, Integration, and Consulting for pension administration.">
  <!-- Overview Section -->
  <section class="hero-section bg-gradient-brand-soft">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">Solution Components</h1>
        <p class="text-xl text-grey">Comprehensive capabilities designed to transform pension management through intelligent automation</p>
      </div>
    </div>
  </section>

  <!-- Solutions Grid -->
  <section class="section">
    <div class="container">
      <div class="space-y-16">
        {solutions.map((solution) => (
          <div class="relative">
            <div id={solution.slug?.current} class="absolute" style="top: -120px;"></div>
            <div class="grid md:grid-cols-2 gap-12 items-stretch">
              <div class="space-y-8">
                <h2 class="text-3xl font-bold mb-4">{solution.title}</h2>
                <p class="text-xl text-grey mb-8">{solution.description}</p>
                <div class="bg-white rounded-lg shadow-card p-8">
                  <h3 class="text-xl font-bold mb-6">Key Features</h3>
                  <ul class="space-y-4">
                    {solution.features?.map((feature: string) => (
                      <li class="flex items-start">
                        <span class="text-purple mr-3">â€¢</span>
                        <p class="text-grey">{feature}</p>
                      </li>
                    ))}
                  </ul>
                </div>
                <div class="bg-white rounded-lg shadow-card p-8">
                  <h3 class="text-xl font-bold mb-6">{solution.detailHeader}</h3>
                  <p class="text-grey whitespace-pre-line">{solution.detailContent}</p>
                </div>
              </div>
              <div class="bg-gradient-dark rounded-lg p-8 h-full flex items-center">
                <div class="aspect-square bg-dark-purple rounded-lg shadow-card overflow-hidden w-full">
                  <MermaidDiagram
                    id={`${solution.slug?.current}-diagram`}
                    definition={solution.diagramDefinition || ''}
                    className="w-full h-full flex items-center justify-center"
                  />
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section bg-gradient-brand text-white">
    <div class="container text-center">
      <h2 class="text-3xl font-bold mb-6 text-white">Ready to explore our solution components?</h2>
      <p class="text-xl mb-8 opacity-90">Contact us to learn more about how pensionable.ai can transform your pension management</p>
      <a href="/contact" class="btn bg-white text-navy hover:bg-white/90">Get Started</a>
    </div>
  </section>
</Layout>

<script>
  import mermaid from 'mermaid';
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark',
    securityLevel: 'loose',
    fontSize: 14,
    fontFamily: 'Inter, sans-serif',
  });
</script>
